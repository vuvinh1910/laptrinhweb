<!DOCTYPE html>
<html lang="vi" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chi tiết đơn đặt phòng</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link rel="stylesheet" th:href="@{/css/user/bookingdetail.css}">
    <link rel="stylesheet" th:href="@{/css/public/popup-confirm.css}">
    <script th:src="@{/js/popup.js}" defer></script>
</head>
<body>

<div class="container booking-details-page mt-4 mb-5">
    <h2 class="text-center mb-4">Chi tiết đơn đặt phòng <span th:text="${booking.id}">#123456</span></h2>

    <div class="booking-details-card">

        <div class="card-section summary-section">
            <h3 class="section-title"><i class="fas fa-info-circle me-2"></i>Thông tin chung</h3>
            <dl>

                <dt>Trạng thái:</dt>
                <dd>
                    <span th:text="${booking.status}">Đã xác nhận</span>
                    <span th:if="${booking.status == 'CONFIRMED'}" class="status-badge status-confirmed"></span>
                    <span th:if="${booking.status == 'PENDING'}" class="status-badge status-pending"></span> <span
                        th:if="${booking.status == 'CANCELLED'}" class="status-badge status-cancelled"></span> <span
                        th:if="${booking.status == 'COMPLETED'}" class="status-badge status-completed"></span>
                </dd>

                <dt>Số người:</dt>
                <dd th:text="${booking.numOfPeople}">2 người</dd>
            </dl>
        </div>

        <div class="card-section hotel-section">
            <h3 class="section-title"><i class="fas fa-hotel me-2"></i>Thông tin khách sạn</h3>
            <div class="hotel-info-display">
                <div class="hotel-image-small">
                    <img src="https://res.klook.com/klook-hotel/image/upload/fl_lossy.progressive,c_fill,f_auto,w_375,q_85/travelapi/76000000/75620000/75612100/75612069/8b2510b3_z.webp" alt="Hotel Image">
                </div>
                <div class="hotel-text-info">
                    <h4 th:text="${hotel.nameHotel}">Tên Khách Sạn</h4>
                    <p><i class="fas fa-map-marker-alt me-1"></i><span th:text="${hotel.address}">Địa chỉ đầy đủ của khách sạn</span>
                    </p>
                    <p th:if="${hotel.phone}"><i class="fas fa-phone me-1"></i>Điện thoại: <span
                            th:text="${hotel.phone}">0123 456 789</span></p>
                    <p th:if="${hotel.star}"><i class="fas fa-star me-1 text-warning"></i>Đánh giá: <span
                            class="text-warning"
                            th:utext="${#strings.repeat('★', hotel.star)} + ${#strings.repeat('☆', 5 - hotel.star)}">★★★★★</span>
                    </p>
                </div>
            </div>
        </div>

        <div class="card-section stay-details-section">
            <h3 class="section-title"><i class="fas fa-calendar-alt me-2"></i>Chi tiết lưu trú</h3>
            <dl>
                <dt>Ngày nhận phòng:</dt>
                <dd th:text="${#temporals.format(booking.checkIn, 'dd/MM/yyyy')}">10/01/2025</dd>

                <dt>Ngày trả phòng:</dt>
                <dd th:text="${#temporals.format(booking.checkOut, 'dd/MM/yyyy')}">12/01/2025</dd>

                <dt>Loại phòng:</dt>
                <dd th:text="${room.roomType}">Phòng Deluxe</dd>

                <dt>Số lượng phòng:</dt>
                <dd>1 phòng</dd>
            </dl>
        </div>

        <div class="card-section price-section">
            <h3 class="section-title"><i class="fas fa-credit-card me-2"></i>Chi tiết thanh toán</h3>
            <dl>
                <dt>Tổng giá trị:</dt>
                <dd th:text="${#numbers.formatInteger(booking.totalPrice, 0, 'COMMA')} + ' VND'">3,500,000 VND</dd>

                <dt>Đã thanh toán:</dt>
                <dd th:text="${booking.isPaid ? #numbers.formatInteger(booking.totalPrice, 0, 'COMMA') : 0} + ' VND'"
                    th:classappend="${booking.isPaid} ? 'text-success fw-bold' : ''">3,500,000 VND
                </dd>
                <dt>Còn lại:</dt>
                <dd th:text="${booking.isPaid ? 0 : #numbers.formatInteger(booking.totalPrice, 0, 'COMMA')} + ' VND'">0
                    VND
                </dd>

                <dt>Phương thức:</dt>
                <dd>Thẻ Tín dụng</dd>

            </dl>
        </div>

        <div class="card-section guest-section">
            <h3 class="section-title"><i class="fas fa-user me-2"></i>Thông tin khách hàng</h3>
            <dl>
                <dt>Họ tên:</dt>
                <dd th:text="${user.fullName}">Nguyễn Văn A</dd>
                <dt>Email:</dt>
                <dd th:text="${user.email}">a.nguyen@example.com</dd>
                <dt>Điện thoại:</dt>
                <dd th:text="${booking.phone}">0912 345 678</dd>
            </dl>
        </div>
        <div class="text-center mt-4">
            <a th:href="@{/users/myInfo/booking-rooms}" class="btn btn-primary me-2"><i
                    class="fas fa-arrow-left me-1"></i> Quay
                lại</a>
        </div>

    </div>
</div>

<!--  tra ve thong bao-->
<div id="myModal" class="modal" th:if="${result}">
    <div class="modal-content">
        <span class="close">&times;</span>
        <p class="result-popup" th:text="${result}">Thông báo</p>
    </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>